# Домашнее задание к занятию "3.2. Работа в терминале, лекция 2"

## 1. Какого типа команда `cd`? Попробуйте объяснить, почему она именно такого типа; опишите ход своих мыслей, если считаете что она могла бы быть другого типа.
`cd` - встроенная команда командной оболочки (например, "bash"). Jyf j, она обеспечивает базовую функциональность оболочки (навигацию по файловой системе) и на всех системах с данной командной оболочкой должна работать одинаково. Поэтому нет смысла делать её внешней. Если нужен расширенный или изменённый функционал - можно сменить оболочку.
```bash
root@vagrant:~# man bash
...
SHELL BUILTIN COMMANDS
...
       cd [-L|[-P [-e]] [-@]] [dir]
              Change  the  current  directory  to dir.  if dir is not supplied, the value of the HOME shell variable is the default.  Any additional arguments following dir are ignored.  ...
```
## 2. Какая альтернатива без pipe команде `grep <some_string> <some_file> | wc -l`? `man grep` поможет в ответе на этот вопрос. Ознакомьтесь с [документом](http://www.smallo.ruhr.de/award.html) о других подобных некорректных вариантах использования pipe.
```bash
root@vagrant:~# man bash >> man_bash
root@vagrant:~# grep cd man_bash | wc -l
21
root@vagrant:~# grep -c cd man_bash
21
```
## 3. Какой процесс с PID `1` является родителем для всех процессов в вашей виртуальной машине Ubuntu 20.04?
```bash
root@vagrant:~# ps -p 1
    PID TTY          TIME CMD
      1 ?        00:00:05 systemd
```
## 4. Как будет выглядеть команда, которая перенаправит вывод stderr `ls` на другую сессию терминала?
**Session 1 (user: root)** Определение номера рабочей сесии (`pts/0`) и запрос вывода команды `ls` для несуществующего каталога `/testdir` 
```bash
root@vagrant:~# who
vagrant  pts/0        2021-11-19 13:06 (10.0.2.2)
vagrant  pts/1        2021-11-21 08:53 (10.0.2.2)
root@vagrant:~# tty
/dev/pts/0
root@vagrant:~# ls -la /testdir 2> /dev/pts/1
```
**Session 2 (user: vagrant)** Определение номера рабочей сесии (`pts/1`) и вывод сообщения об ошибке из потока `stderr` сессии `pts/0`
```bash
vagrant@vagrant:~$ tty
/dev/pts/1
vagrant@vagrant:~$ ls: cannot access '/testdir': No such file or directory

```
## 5. Получится ли одновременно передать команде файл на stdin и вывести ее stdout в другой файл? Приведите работающий пример.
**Создадим тестовый файл перенаправив вывод косманды `cat` в файл `/root/test1`:**
```bash
root@vagrant:~# cat > /root/test1
#Source: /root/test1
Line 1
Line 2
# EOF
```
**Направим на вход команды `cat` тестовый файл `/root/test1` и выход команды в файл `/root/test2`. При успешном выполнении команды выведем содержимое файла `/root/test2` командой `tail`:**
```bash
root@vagrant:~# cat </root/test1 >/root/test2 && tail /root/test2
#Source: /root/test1
Line 1
Line 2
# EOF
root@vagrant:~#
```

## 6. Получится ли находясь в графическом режиме, вывести данные из PTY в какой-либо из эмуляторов TTY? Сможете ли вы наблюдать выводимые данные?
```bash

```
![Вывод из TTY1](https://hw32-1.png)
## 7. Выполните команду `bash 5>&1`. К чему она приведет? Что будет, если вы выполните `echo netology > /proc/$$/fd/5`? Почему так происходит?

## 8. Получится ли в качестве входного потока для pipe использовать только stderr команды, не потеряв при этом отображение stdout на pty? Напоминаем: по умолчанию через pipe передается только stdout команды слева от `|` на stdin команды справа.
Это можно сделать, поменяв стандартные потоки местами через промежуточный новый дескриптор, который вы научились создавать в предыдущем вопросе.

## 9. Что выведет команда `cat /proc/$$/environ`? Как еще можно получить аналогичный по содержанию вывод?

## 10. Используя `man`, опишите что доступно по адресам `/proc/<PID>/cmdline`, `/proc/<PID>/exe`.

## 11. Узнайте, какую наиболее старшую версию набора инструкций SSE поддерживает ваш процессор с помощью `/proc/cpuinfo`.
## 12. При открытии нового окна терминала и `vagrant ssh` создается новая сессия и выделяется pty. Это можно подтвердить командой `tty`, которая упоминалась в лекции 3.2. Однако:

    ```bash
	vagrant@netology1:~$ ssh localhost 'tty'
	not a tty
    ```

почитайте, почему так происходит, и как изменить поведение.

## 13. Бывает, что есть необходимость переместить запущенный процесс из одной сессии в другую. Попробуйте сделать это, воспользовавшись `reptyr`. Например, так можно перенести в `screen` процесс, который вы запустили по ошибке в обычной SSH-сессии.

## 14. `sudo echo string > /root/new_file` не даст выполнить перенаправление под обычным пользователем, так как перенаправлением занимается процесс shell'а, который запущен без `sudo` под вашим пользователем. Для решения данной проблемы можно использовать конструкцию `echo string | sudo tee /root/new_file`. Узнайте что делает команда `tee` и почему в отличие от `sudo echo` команда с `sudo tee` будет работать.

